"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const EnumRenderer_1 = require("../../src/generate/EnumRenderer");
const model_1 = require("./model");
const chai_1 = require("chai");
const debug_1 = tslib_1.__importDefault(require("debug"));
const fs = tslib_1.__importStar(require("fs-extra"));
const debug = debug_1.default('cli-test:enum-renderer');
describe('EnumRenderer', function () {
    let modelTemplate;
    before(() => {
        // set timestamp in the context to make the output predictable
        modelTemplate = fs.readFileSync('./src/templates/entities/enums.ts.mst', 'utf-8');
    });
    it('should render enum values', function () {
        const model = model_1.fromStringSchema(`
        enum episode_long_name {
          NEWHOPE
          EMPIRE
          JEDI
        }
      `);
        const generator = new EnumRenderer_1.EnumRenderer(model);
        const rendered = generator.render(modelTemplate);
        debug(`rendered: ${JSON.stringify(rendered, null, 2)}`);
        chai_1.expect(rendered).to.include(`export enum episode_long_name`, 'Should pascal-case the name');
        chai_1.expect(rendered).to.include(`NEWHOPE = 'NEWHOPE',`, 'Should render values');
    });
});
