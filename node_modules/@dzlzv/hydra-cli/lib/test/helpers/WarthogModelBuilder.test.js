"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const WarthogModelBuilder_1 = require("./../../src/parse/WarthogModelBuilder");
const chai_1 = require("chai");
describe('WarthogModelBuild', () => {
    it('should add multi-field multi-entity FTSQuery to the model', () => {
        const generator = new WarthogModelBuilder_1.WarthogModelBuilder('test/fixtures/multiple-entities.graphql');
        const model = generator.buildWarthogModel();
        chai_1.expect(model.ftsQueries).length(1, 'Should detect a query');
        const query = model.ftsQueries[0];
        chai_1.expect(query.clauses).length(4, 'The query should contain four clauses');
        const entities = [];
        const fields = [];
        query.clauses.map((c) => {
            entities.push(c.entity.name);
            fields.push(c.field.name);
        });
        chai_1.expect(entities).to.include.members(['Category', 'Thread', 'Post'], 'Should detect three entities');
        chai_1.expect(fields).to.include.members(['initial_body_text', 'name'], 'Should detect fields');
    });
    it('should detect multiple queries', () => {
        const generator = new WarthogModelBuilder_1.WarthogModelBuilder('test/fixtures/multiple-queries.graphql');
        const model = generator.buildWarthogModel();
        chai_1.expect(model.ftsQueries).length(2, 'Should detect two queries');
    });
});
